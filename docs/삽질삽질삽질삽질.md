# MoveIt2 Humble - Time Parameterization ì˜¤ë¥˜ í•´ê²°

## ë¬¸ì œ
RVizì—ì„œ Plan & Execute ì‹œ ë‹¤ìŒ ì˜¤ë¥˜ ë°œìƒ:
```
[ERROR] [arm_controller]: Time between points 0 and 1 is not strictly increasing, it is 0.000000 and 0.000000 respectively
[ERROR] Goal was rejected by server
```

## ì›ì¸
MoveIt2 Humbleì—ì„œ trajectoryì— time_from_startê°€ 0ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ros2_controlì´ ê±°ë¶€í•¨.

## í•µì‹¬ í•´ê²°ì±…

### 1. í”ŒëŸ¬ê·¸ì¸ ì´ë¦„ì´ ë‹¤ë¦„!
MoveIt2 Humbleì—ì„œëŠ” `default_planning_*` ê°€ ì•„ë‹ˆë¼ `default_planner_*` ì‚¬ìš©:
```yaml
# í‹€ë¦¼ âŒ
default_planning_request_adapters/FixStartStateCollision

# ë§ìŒ âœ…
default_planner_request_adapters/FixStartStateCollision
```

### 2. AddTimeOptimalParameterizationì€ request_adapter!
MoveIt2 Humbleì—ì„œëŠ” `AddTimeOptimalParameterization`ì´ **response_adapterê°€ ì•„ë‹ˆë¼ request_adapter**ì„:
```yaml
# í‹€ë¦¼ âŒ
response_adapters: "...AddTimeOptimalParameterization"

# ë§ìŒ âœ…
request_adapters: "...AddTimeOptimalParameterization"
```

## ìµœì¢… ì„¤ì •

### ompl_planning.yaml
```yaml
planning_plugin: ompl_interface/OMPLPlanner
request_adapters: "default_planner_request_adapters/ResolveConstraintFrames default_planner_request_adapters/FixWorkspaceBounds default_planner_request_adapters/FixStartStateBounds default_planner_request_adapters/FixStartStateCollision default_planner_request_adapters/FixStartStatePathConstraints default_planner_request_adapters/AddTimeOptimalParameterization"
```

### launch íŒŒì¼ (Python)
```python
ompl_planning_pipeline_config = {
    "planning_pipelines": ["ompl"],
    "default_planning_pipeline": "ompl",
    "ompl.planning_plugin": "ompl_interface/OMPLPlanner",
    "ompl.request_adapters": "default_planner_request_adapters/ResolveConstraintFrames default_planner_request_adapters/FixWorkspaceBounds default_planner_request_adapters/FixStartStateBounds default_planner_request_adapters/FixStartStateCollision default_planner_request_adapters/FixStartStatePathConstraints default_planner_request_adapters/AddTimeOptimalParameterization",
    "ompl.start_state_max_bounds_error": 0.1,
}
```

## í™•ì¸ ë°©ë²•
launch í›„ ë¡œê·¸ì—ì„œ ë‹¤ìŒ ë©”ì‹œì§€ í™•ì¸:
```
[INFO] Using planning request adapter 'Add Time Optimal Parameterization'
```

## ì°¸ê³  ë§í¬
- https://github.com/moveit/moveit_task_constructor/issues/624
- https://github.com/moveit/moveit_task_constructor/issues/578

## ì‚½ì§ˆ ê¸°ë¡
1. response_adapters ìˆœì„œ ë³€ê²½ ì‹œë„ â†’ ì‹¤íŒ¨
2. YAML ë¦¬ìŠ¤íŠ¸ í˜•ì‹ ì‹œë„ â†’ `expected [string] got [string_array]` ì˜¤ë¥˜
3. `default_planning_*` ì‚¬ìš© â†’ í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ ì‹¤íŒ¨
4. **`default_planner_*` + request_adapterë¡œ ë³€ê²½ â†’ ì„±ê³µ! ğŸ‰**
